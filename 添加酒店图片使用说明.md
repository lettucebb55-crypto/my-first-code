# 添加酒店图片使用说明

## 📋 功能说明

已为酒店模块添加了多图片支持功能，可以将多张图片添加到推荐酒店中，并在酒店详情页展示。

## 🎯 实现的功能

1. **HotelImage模型**：支持酒店存储多张图片
2. **管理命令**：自动将图片添加到推荐酒店
3. **后台管理**：在Django后台可以管理酒店图片
4. **前端展示**：在酒店详情页以网格形式展示图片，支持点击放大查看

## 📝 使用步骤

### 方法一：使用管理命令（推荐）

#### 步骤1：准备图片文件

将6张图片文件放到项目根目录下的 `media/hotel_images_to_add/` 目录中。

**支持的图片格式：**
- `.jpg` / `.jpeg`
- `.png`
- `.gif`
- `.webp`

**目录结构示例：**
```
baoding_tourism/
├── media/
│   └── hotel_images_to_add/
│       ├── hotel_room_1.jpg
│       ├── hotel_room_2.jpg
│       ├── hotel_room_3.jpg
│       ├── hotel_room_4.jpg
│       ├── hotel_room_5.jpg
│       └── hotel_room_6.jpg
```

#### 步骤2：运行管理命令

```bash
python manage.py add_hotel_images
```

命令会自动：
- 读取 `media/hotel_images_to_add/` 目录下的所有图片
- 将图片循环分配到推荐酒店（如果推荐酒店不足6个，会循环分配）
- 创建HotelImage记录并保存图片

#### 步骤3：查看结果

访问酒店详情页，即可看到添加的图片。

### 方法二：指定图片路径

如果图片在其他位置，可以使用 `--image-path` 参数：

```bash
python manage.py add_hotel_images --image-path /path/to/image1.jpg --image-path /path/to/image2.jpg
```

### 方法三：指定酒店ID

如果想将图片添加到特定酒店：

```bash
python manage.py add_hotel_images --image-path /path/to/image.jpg --hotel-id 1
```

### 方法四：使用Django后台管理

1. 访问Django后台：`http://127.0.0.1:8000/admin/`
2. 登录管理员账号
3. 进入"酒店" → 选择要添加图片的酒店
4. 在"酒店图片"部分添加图片
5. 填写图片标题和描述（可选）
6. 设置显示顺序（数字越小越靠前）
7. 保存

## 🔧 管理命令参数说明

```bash
python manage.py add_hotel_images [选项]
```

**可用选项：**

- `--image-path PATH`：指定图片文件路径（可多次使用）
- `--hotel-id ID`：指定酒店ID（如果不指定，将自动分配到推荐酒店）
- `--from-dir DIR`：从指定目录读取图片（默认：`media/hotel_images_to_add`）

**示例：**

```bash
# 从默认目录读取图片
python manage.py add_hotel_images

# 指定图片路径
python manage.py add_hotel_images --image-path ./images/room1.jpg --image-path ./images/room2.jpg

# 指定酒店和图片路径
python manage.py add_hotel_images --hotel-id 1 --image-path ./images/room1.jpg

# 从自定义目录读取
python manage.py add_hotel_images --from-dir ./my_images
```

## 📸 前端展示效果

在酒店详情页（`/hotels/<id>/`）中：

1. **图片网格展示**：以3列网格形式展示所有图片
2. **点击放大**：点击图片可以打开模态框查看大图
3. **图片标题**：如果设置了标题，会在图片下方显示
4. **响应式设计**：在不同屏幕尺寸下自动调整布局

## 🗂️ 数据库结构

### HotelImage 模型字段

| 字段 | 类型 | 说明 |
|------|------|------|
| `hotel` | ForeignKey | 所属酒店 |
| `image` | ImageField | 图片文件 |
| `title` | CharField | 图片标题（可选） |
| `description` | TextField | 图片描述（可选） |
| `display_order` | PositiveIntegerField | 显示顺序（数字越小越靠前） |
| `created_at` | DateTimeField | 创建时间 |

## 🔍 查看图片

### 在Django后台查看

1. 访问：`http://127.0.0.1:8000/admin/hotels/hotelimage/`
2. 可以看到所有酒店图片列表
3. 可以编辑、删除图片

### 在前端查看

1. 访问酒店列表：`http://127.0.0.1:8000/hotels/`
2. 点击推荐酒店进入详情页
3. 在详情页可以看到"酒店图片"部分

## ⚠️ 注意事项

1. **图片大小**：建议图片大小不超过5MB，以确保加载速度
2. **图片数量**：建议每个酒店不超过20张图片
3. **图片格式**：支持常见图片格式，推荐使用JPG或PNG
4. **推荐酒店**：如果没有推荐酒店，命令会提示错误，需要先创建推荐酒店
5. **图片路径**：使用相对路径时，相对于项目根目录

## 🐛 常见问题

### Q1: 命令提示"没有找到推荐酒店"

**A:** 需要先创建推荐酒店。可以：
1. 运行 `python manage.py init_hotel_data` 创建示例酒店数据
2. 或在Django后台手动创建酒店并设置为推荐

### Q2: 图片上传失败

**A:** 检查：
1. 图片文件是否存在
2. 图片格式是否支持
3. `media` 目录是否有写入权限

### Q3: 图片不显示

**A:** 检查：
1. Django的 `MEDIA_URL` 和 `MEDIA_ROOT` 配置是否正确
2. 开发环境需要在 `urls.py` 中配置媒体文件服务
3. 图片文件是否已正确上传到 `media/hotel_images/` 目录

### Q4: 如何删除图片

**A:** 可以通过以下方式：
1. Django后台：进入"酒店图片"管理页面，删除对应记录
2. 代码：`HotelImage.objects.filter(id=图片ID).delete()`

## 📚 相关文件

- **模型定义**：`apps/hotels/models.py`
- **管理命令**：`apps/hotels/management/commands/add_hotel_images.py`
- **后台管理**：`apps/hotels/admin.py`
- **视图**：`apps/hotels/views.py`
- **模板**：`templates/hotels/detail.html`

## 🎉 完成

现在您可以将6张酒店房间图片添加到推荐酒店中了！

---

**提示**：如果您有实际的图片文件，请将它们放到 `media/hotel_images_to_add/` 目录，然后运行管理命令即可。

